### LVS轮询算法

LVS有三种（fullnat暂且忽略）八种常用算法



固定算法：

- rr		轮询，在RS节点中均摊请求 

	 wrr 		权重轮询，加权轮询调度，他根据不同节点的权重来进行分配任务，如果权重为0时不可用
	 dh 		目的地址hash调度。以目的地址为关键字查找一个静态hash表来获取需要的RS
	 sh		源地址hash。同上

动态调度算法：

- SED
- NQ
	 wlc		加权最小连接数。根据权重和连接数进行调度，假设A权重为2当前处理10个链接，B的权重为1当前处理4个链接，那么下次调度就会根据  连接数/权重 得出下次调度会分给B。（当然这种也有不足，比如数据库的慢查询这些就会导致WLC的比值较小）
	 lc		最小连接数调度
	 lblc		基于地址的最小链接调度。如果这台RS尚未满负荷，那么将来自同一个目的地址的请求分配给同一台RS，否则分配给其他链接最小的RS
	 lblcr	基于地址带重复最小连接数调度。对于某一地址，对应一个RS子集。对此地址请求，为它分配自己种连接数最小的RS；如果自己中所有服务均已满负荷，则从群集中选择一个连接数较小的RS，将他加入到此子集中并分配连接；若一段时间内，未被做任何修改，则删除子集中最大负荷的节点。





### LVS的调度算法的生产环境选型

1. 一般服务如：http,mail,mysql等，常用的算法有rr wlc  wrr
2. 基于局部性最少链接的lblc 和带复制的基于局部性最少链接的lblcr主要适用于web缓存和数据库缓存群集。
3. sh和dh可以结合使用在防火墙群集中，他们可以保证整个体统的唯一出入口
4. 

